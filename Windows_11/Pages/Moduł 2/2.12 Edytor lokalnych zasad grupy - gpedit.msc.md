# 2.12 Edytor lokalnych zasad grupy - `gpedit.msc`

## Wprowadzenie

<img src="https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/gpedit-ico.webp" alt="Ikona Edytora lokalnych zasad grupy" style="display: inline-block; height: 1.2rem; vertical-align: middle;"> **Edytor lokalnych zasad grupy** (`gpedit.msc`) to przystawka w systemie **_Windows_**, umożliwiająca zarządzanie zasadami blokowania, zabraniania oraz ustawiania domyślnych wartości ustawień systemowych.  
Działa w edycjach **_Pro_**, **_Enterprise_** i **_Education_**, pozwala na konfigurację globalnych ustawień na poziomie lokalnym, z hierarchią, w której _zasady komputera_ nadpisują _zasady użytkownika_.

_Konfiguracja użytkownika_ dotyczy wszystkich kont, bez wykluczania użytkowników czy grup, co ogranicza użyteczność przystawki. Brak selektywności sprawia, że lepszym rozwiązaniem jest konfiguracja zasad grup w *Active Directory* na _**Windows Server**_, gdzie lokalne **GPO** są nadpisywane przez domenowe.

---

## Uruchamianie Edytora lokalnych zasad grupy

Przystawkę można uruchomić na kilka sposobów:

- **Uruchom**: Naciśnij <span style="white-space: nowrap;"><kbd class="Win"></kbd> + <kbd>R</kbd></span>, wpisz `gpedit.msc` i naciśnij <kbd>Enter</kbd>.
- <img src="https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/file-explorer-icon.png" alt="Ikona Eksploratora plików" style="display: inline-block; height: 1.2rem; vertical-align: middle;"> **Eksplorator plików**: Przejdź do `C:\Windows\System32`, kliknij dwukrotnie `gpedit.msc`.

![Programik gpedit.msc uruchamiający Edytor lokalnych zasad grupy](https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/plik-gpedit.msc.webp)

## Interfejs przystawki

Okno `gpedit.msc` składa się z dwóch sekcji:

- **Drzewo nawigacji**: Lewy panel z hierarchiami:
  - _Konfiguracja komputera_: Zasady i ustawienia dla całego systemu.
  - _Konfiguracja użytkownika_: Zasady i ustawienia tylko dla tego aktualnie zalogowanego użytkownika.
- **Panel zasad**: Możesz go przełączać pomiędzy widokami rozszerzonym a standardowym, gdzie przy pierwszej opcji masz dodatkowe okienko z opisem wybranej zasady.

![Przystawka Edytor lokalnych zasad grupy](https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/gpedit.msc.webp)

### Kategorie w Konfiguracjach

- **Ustawienia oprogramowania** są w wersji klienckiej puste. Dopiero w przypadku konfigurowania zasad grupy w domenie uzyskasz możliwość, np. rozproszonej instalacji oprogramowania poprzez sieć.
- **Ustawienia systemu Windows** > _Skrypty ..._: Tu możesz określić skrypty `.bat` i `.ps` do uruchomienia:
  - W przypadku komputera podczas startu i zamykania systemu.
  - W przypadku użytkownika podczas logowania i wylogowywania.
- **Ustawienia systemu Windows** > _Rozmieszczone drukarki_: Dodawanie drukarki sieciowej.
- **Ustawienia systemu Windows** > _Ustawienia zabezpieczenia_: W przypadku komputera masz pełen zakres ustawień z przystawki `secpol.msc`, a w przypadku użytkownika tylko dwie zasady z kategorii **_"Zasady kluczy publicznych"_**.
- **Szablony administracyjne**: Tu znajdziesz wszystkie zasady dotyczące zabraniania, blokowania i ustawień domyślnych elementów systemu _**Windows**_.

## Zastosowanie nowych zasad

W zależności od dokonanych zmian, aby je zastosować, będzie trzeba wpisać w konsoli poleceń komendę:

```shell
gpupdate /force
```

<div data-hint="info">

Niektóre zasady będą wymagały ponownego zalogowania się lub uruchomienia systemu.

</div>

## Analiza `gpedit.msc` i powiązań w systemie

Lokalnie edytor zasad grupy jest tak naprawdę podrzędną opcją na zmodyfikowanie rejestru, a główne kategorie tyczą się grup kluczy:

- **Konfiguracja komputera** odnosi się do kluczy w `HKEY_LOCAL_MACHINE`.
- **Konfiguracja użytkownika** odnosi się do kluczy w `HKEY_CURRENT_USER`.

Przechodząc do lokalizacji `C:\Windows\System32\GroupPolicy`, zobaczysz dwa katalogi _"Machine"_ i _"User"_. Są one domyślnie puste, dopóki nie dokonasz zmian w konfiguracji komputera lub użytkownika w `gpedit.msc`. Wtedy pojawią się dwa nowe pliki `Registry.pol` oraz `comment.cmtx`. Pierwszy będzie przechowywał klucze z wartością dla rejestru, a drugi komentarze w formacie **`XML`**.

Ustawienie wartości dla danego klucza bezpośrednio w rejestrze nie może być zmienione przez `gpedit.msc`. W ten sposób możesz zablokować dostęp do **Panelu sterowania** wszystkim użytkownikom, by potem zalogować się na swoje konto administratora i poprzez rejestr odblokować tylko sobie dostęp do **Panelu sterowania**. Co jest chwilowym rozwiązaniem, do czasu ponownego zaktualizowania lokalnych zasad grupy. Po wywołaniu komendy `gpupdate /force` dane w rejestrze zostaną nadpisane.

Poniżej na obrazku masz dwie przykładowe zasady i pod nim zawartość plików `Registry.pol` oraz `comment.cmtx` z katalogu: <span style="white-space: nowrap;">`C:\Windows\System32\GroupPolicy\User\`</span>

<small>Registry.pol</small>

```.pol
剐来
[Software\Microsoft\Windows\CurrentVersion\Policies\Explorer ;NoControlPanel ; ; ; ]
[Software\Microsoft\Windows\CurrentVersion\Policies\Explorer ;SettingsPageVisibility ; ; ;hide ]
```

<small>comment.cmtx</small>

```xml
<?xml version='1.0' encoding='utf-8'?>
<policyComments xmlns:xsd="[http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema)" xmlns:xsi="[http://www.w3.org/2001/XMLSchema-instance](http://www.w3.org/2001/XMLSchema-instance)" revision="1.0" schemaVersion="1.0" xmlns="[http://www.microsoft.com/GroupPolicy/CommentDefinitions](http://www.microsoft.com/GroupPolicy/CommentDefinitions)">
  <policyNamespaces>
    <using prefix="ns0" namespace="Microsoft.Policies.ControlPanel"></using>
  </policyNamespaces>
  <comments>
    <admTemplate>
      <comment policyRef="ns0:NoControlPanel" commentText="$(resource.ns0_NoControlPanel)"></comment>
      <comment policyRef="ns0:SettingsPageVisibility" commentText="$(resource.ns0_SettingsPageVisibility)"></comment>
    </admTemplate>
  </comments>
  <resources minRequiredRevision="1.0">
    <stringTable>
      <string id="ns0_NoControlPanel">xD</string>
      <string id="ns0_SettingsPageVisibility">Elo, elo</string>
    </stringTable>
  </resources>
</policyComments>
```

---

# Podcast AI

<audio src="https://raw.githubusercontent.com/Edu-Koala-V/audio_podcast/refs/heads/main/Windows_11/Audio/Local Group Policy Editor_ Managing Windows Settings.wav" controls>
Twoja przeglądarka nie wspiera odtwarzania plików audio.
</audio>
