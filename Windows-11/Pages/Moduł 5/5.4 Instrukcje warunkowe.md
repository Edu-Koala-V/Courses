# 5.4: Instrukcje warunkowe

## Wprowadzenie

Instrukcje warunkowe w skryptach **BATCH** to spos√≥b, ≈ºeby Tw√≥j skrypt my≈õla≈Ç: "_Je≈ºeli co≈õ jest prawdƒÖ, zr√≥b to, a je≈õli nie, zr√≥b tamto_".

### Definicja

<div data-hint="info">

**Instrukcja warunkowa**: Polecenie w skrypcie, kt√≥re pozwala na wykonanie r√≥≈ºnych akcji w zale≈ºno≈õci od tego, czy okre≈õlony warunek jest prawdziwy, czy fa≈Çszywy. W skryptach BATCH u≈ºywa siƒô g≈Ç√≥wnie `IF`, `ELSE` oraz `ERRORLEVEL` do tworzenia takich instrukcji.

</div>

## Podstawowa sk≈Çadnia

| Polecenie    | Opis                                                                                                                                                          |
| :----------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `IF`         | Sprawdza warunek, np. `IF "%1"=="" echo Brak parametru!`. </br>Wykonuje polecenie, je≈ºeli warunek jest prawdziwy, czyli w tym przypadku nie podano parametru. |
| `ELSE`       | Wykonuje polecenie, je≈õli warunek `IF` jest fa≈Çszywy, np. `IF "%1"=="" (echo Brak) ELSE (echo Jest)`, czyli w tym przypadku podano parametr                   |
| `ELSE IF`    | Sprawdza kolejny warunek, je≈ºeli `IF` by≈Ç fa≈Çszywy.                                                                                                           |
| `IF NOT`     | Sprawdza warunek, je≈ºeli jest fa≈Çszywy to wykonuje polecenie.                                                                                                  |
| `GOTO`       | Przeskakuje do etykiety (ang. _label_) w skrypcie, np. `GOTO :koniec` (etykieta to `:koniec` w innej czƒô≈õci kodu).                                            |
| `ERRORLEVEL` | Sprawdza kod wynikowy polecenia. Kody: $$0$$(sukces),$$1$$ lub wy≈ºszy (b≈ÇƒÖd).                                                                                 |

### Por√≥wnywanie warto≈õci liczbowych

| **Operator** | **Opis dzia≈Çania**                                                                        |
| :----------- | :---------------------------------------------------------------------------------------- |
| `EQU`        | **R√≥wne** (`==`) - `PRAWDA`, gdy obie warto≈õci sƒÖ sobie r√≥wne.                                  |
| `NEQ`        | **Nier√≥wne** (`!=`) - `PRAWDA`, gdy warto≈õci sƒÖ r√≥≈ºne.                                          |
| `LSS`        | **Mniejsze** (`<`) - `PRAWDA`, gdy pierwsza warto≈õƒá jest mniejsza od drugiej.                   |
| `LEQ`        | **Mniejsze lub r√≥wne** (`<=`) - `PRAWDA`, gdy pierwsza warto≈õƒá jest mniejsza lub r√≥wna drugiej. |
| `GTR`        | **Wiƒôksze** (`>`) - `PRAWDA`, gdy pierwsza warto≈õƒá jest wiƒôksza od drugiej.                     |
| `GEQ`        | **Wiƒôksze lub r√≥wne** (`>=`) - `PRAWDA`, gdy pierwsza warto≈õƒá jest wiƒôksza lub r√≥wna drugiej.   |

### Por√≥wnanie warto≈õci tekstowych (ciƒÖgi znak√≥w)

Por√≥wnywanie warto≈õci tekstowych w skryptach **BATCH** polega na sprawdzaniu, czy dwa ciƒÖgi znak√≥w sƒÖ identyczne lub r√≥≈ºne. U≈ºywa siƒô do tego g≈Ç√≥wnie operatora `==` w poleceniu `IF`. Wa≈ºne jest, aby warto≈õci tekstowe by≈Çy ujƒôte w cudzys≈Çowy (`""`), aby uniknƒÖƒá b≈Çƒôd√≥w, gdy zmienna jest pusta.

```dos
@echo off
CHCP 65001>nul

set /p imie="Podaj swoje imiƒô: "

IF "%imie%"=="Janek" (
    echo Cze≈õƒá, Janek! Witamy w klubie!
) ELSE (
    echo Cze≈õƒá, %imie%! Mi≈Ço Ciƒô poznaƒá!
)

pause
```

- **Wielko≈õƒá liter**: Domy≈õlnie por√≥wnanie jest wra≈ºliwe na wielko≈õƒá liter. Aby je ignorowaƒá, dodaj prze≈ÇƒÖcznik `/I` do polecenia `IF`, np. `IF /I "%imie%"=="janek"`.
- **Puste ciƒÖgi**: Zawsze u≈ºywaj cudzys≈Çow√≥w `"` wok√≥≈Ç zmiennych (`"%zmienna%"`), aby uniknƒÖƒá b≈Çƒôd√≥w sk≈Çadniowych, gdy zmienna jest niezdefiniowana lub pusta.
- **Ograniczenia**: Por√≥wnywanie tekst√≥w w **BATCH** ogranicza siƒô do operator√≥w `==` (r√≥wne), je≈ºeli chcesz sprawdziƒá, czy co≈õ jest nie r√≥wne, musisz u≈ºyƒá sk≈Çadni `IF NOT`.

### Przyk≈Çad zastosowania `ELSE IF`

Zobacz ten kod. Jaki bƒôdzie wynik w konsoli polecenia **CMD**?

```dos
@echo off

set test=1

if %test% EQU 2 (
    echo Kotek
) else if %test% EQU 1 (
    echo Piesek
) else (
    echo Chomik
)

pause
```

### Sprawdzanie odpowiedzi u≈ºytkownika

Poni≈ºej przyk≈Çad sprawdzania, czy u≈ºytkownik, kt√≥ry poda≈Ç sw√≥j wiek, jest pe≈Çnoletni.

```dos
@echo off
CHCP 65001>nul

:reload

rem Sprawdzanie odpowiedzi u≈ºytkownika
set /p odpowiedz="Ile masz lat?: "

if %odpowiedz% GEQ 18 (
    echo To ju≈º mo≈ºesz wypiƒá sobie piwko. üçªüç∫
) else (
    echo Jeszcze jeste≈õ za m≈Çody, aby legalnie wypiƒá piwko. ‚úãüç∫
)

set /p isReloading="Czy chcesz podaƒá sw√≥j wiek jeszcze raz? (T/N): "

if /i "%isReloading%"=="T" (
    GOTO :reload
)

pause
```

- `%odpowiedz% GEQ 18`: sprawdzenie, czy w zmiennej `%odpowiedz%` jest warto≈õƒá wiƒôksza lub r√≥wna liczbie $$18$$.
- `IF /I`: Dopisanie `/I` sprawia, ≈ºe podczas por√≥wnywania warto≈õci wielko≈õƒá liter bƒôdzie ignorowana.
- `GOTO :reload`: sprawia, ≈ºe interpreter przeskoczy w kodzie do etykiety `:reload`.

### Sprawdzanie parametr√≥w

Sp√≥jrz, jak sprawdziƒá, czy u≈ºytkownik poda≈Ç parametr, np. uruchamiajƒÖc `skrypt.bat Janek`.  
W `IF` zostaje sprawdzone, czy prawdƒÖ jest, ≈ºe pierwszy parametr `%1` jest pustym ciƒÖgiem znak√≥w `""`.

```dos
@echo off
CHCP 65001>nul
rem Sprawdzanie, czy podano parametr (zak≈ÇadajƒÖc, ≈ºe jak parametr zostanie podany, to bƒôdzie to imiƒô)
IF "%1"=="" (
    color 0c
    rem Brak parametru
    echo Nie podano ≈ºadnego parametru!
) ELSE (
    rem Parametr podany
    echo Cze≈õƒá, %1!
)
pause
```

### Sprawdzanie wyniku polecenia `ERRORLEVEL`

PrzeszukujƒÖc informacje dostƒôpne w Internecie i dokumentacji **Microsoft**, mo≈ºesz siƒô natknƒÖƒá na `ERRORLEVEL`. Jest to bardzo stara zmienna ≈õrodowiskowa do przechowywania kod√≥w b≈Çƒôd√≥w wykonania polece≈Ñ **CMD**.  
PoczƒÖtkowo mo≈ºesz uznaƒá to za fajnƒÖ rzecz do zwracania komunikat√≥w, co posz≈Ço nie tak. Przyk≈Çadowo dla polecenia dodawania u≈ºytkownika (<span style="white-space: nowrap;">`net user nazwa /add`</span>), gdy uruchomisz skrypt bez uprawnie≈Ñ administratora, zobaczysz systemowy kod b≈Çƒôdu $$5$$, a dla przypadku, gdy u≈ºytkownik istnieje, kodem b≈Çƒôdu bƒôdzie $$2224$$.ü§î 

<details>
<summary>
 Wiƒôc mo≈ºesz napisaƒá kod w skrypcie, kt√≥ry to obs≈Çu≈ºy ü§ì.
</summary>

<span style="text-align: center;display: block;font-size: 50px !important;color: #ff6c00;font-family: monospace;font-weight: bold;text-shadow: 1px 3px 1px #ff0000;">Nic bardziej mylnego!</span>

<img src="https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/radek-kotarski.webp" alt="RadekKotarski - Wykop.pl: https://www.wykop.pl/cdn/c3201142/comment_dLGOvUrq0Nhab16SkeMHdaQUHoImIVNN,w400.jpg">

W ka≈ºdym przypadku zwr√≥cenia b≈Çƒôdu przez polecenie `net user` zmienna `ERRORLEVEL` bƒôdzie r√≥wna $$2$$.

</details>


Mo≈ºesz wykorzystaƒá poni≈ºszy kod i uruchomiƒá go w tych dw√≥ch scenariuszach:

  - Bez uprawnie≈Ñ Administratora.
  - Z uprawnieniami Administratora, ale u≈ºytkownik o tej nazwie ju≈º istnieje.


```dos
@echo off
CHCP 65001>nul

echo | set /p addUser="Dodawanie u≈ºytkownika..."
net user test /add>nul 2>&1

echo.
echo.

if %errorlevel% EQU 0 (
    echo U≈ºytkownik dodany.
) else (
    color 0c
    echo Nie uda≈Ço siƒô dodaƒá u≈ºytkownika.
    echo.
    echo ERRORLEVEL = %errorlevel%
)

echo.

pause
```

---

# Podcast AI

<audio src="https://raw.githubusercontent.com/Edu-Koala-V/audio_podcast/refs/heads/main/Windows_11/Audio/Batch Scripting_ Conditional Statements in CMD.wav" controls>
Twoja przeglƒÖdarka nie wspiera odtwarzania plik√≥w audio.
</audio>
