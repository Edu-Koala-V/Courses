# 2.5 Foldery udostępnione - `fsmgmt.msc`

## Wprowadzenie

<img src="https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/fsmgmt-ico.webp" alt="Ikona Folderów udostępnionych" style="display: inline-block; height: 1.2rem; vertical-align: middle;"> **Foldery udostępnione** (`fsmgmt.msc`) to przystawka, która umożliwia zarządzanie folderami i zasobami udostępnionymi w sieci lokalnej. Pozwala na tworzenie, edytowanie, usuwanie udostępnień, monitorowanie aktywnych sesji użytkowników oraz zarządzanie uprawnieniami dostępu.

---

## Uruchamianie przystawki Foldery udostępnione

Przystawkę można uruchomić na kilka sposobów:

- **Uruchom**: Naciśnij <span style="white-space: nowrap;"><kbd class="Win"></kbd> + <kbd>R</kbd></span>, wpisz `fsmgmt.msc` i naciśnij <kbd>Enter</kbd>.
- **Menu kontekstowe**: Kliknij prawym przyciskiem myszy na ikonę __*Windows Start*__ <img src="https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/windows_11_logo.png" alt="Windows Logo" style="display: inline-block; height: 1.2rem; vertical-align: middle;">, wybierz *"Zarządzanie komputerem"*, a następnie z panelu bocznego przejdź do *Foldery udostępnione*.
- <img src="https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/file-explorer-icon.png" alt="Ikona Eksploratora plików" style="display: inline-block; height: 1.2rem; vertical-align: middle;"> **Eksplorator plików**: Przejdź do `C:\Windows\System32`, znajdź plik `fsmgmt.msc` i kliknij dwukrotnie.

![Programik fsmgmt.msc uruchamiający Foldery udostępnione](https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/plik-fsmgmt.msc.webp)

---

## Interfejs przystawki

Okno `fsmgmt.msc` jest podzielone na trzy główne kontenery w lewym panelu:

- **Udziały**: Lista wszystkich folderów i zasobów udostępnionych na komputerze, w tym domyślne udziały administracyjne (np. `C$`, `ADMIN$`).
- **Sesje**: Informacje o aktywnych połączeniach użytkowników z udostępnionymi zasobami, w tym nazwa użytkownika, komputer i czas trwania sesji.
- **Otwarte pliki**: Lista plików aktualnie otwartych przez użytkowników w udostępnionych folderach, wraz z informacjami o ścieżce i uprawnieniami.

Kliknięcie na folder wyświetla szczegóły w prawym panelu, takie jak ścieżka lokalna, liczba podłączonych użytkowników czy uprawnienia.


![Użytkownicy i grupy lokalne w Zarządzanie komputerem i w autonomicznym oknie](https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/fsmgmt.msc.webp)


## Zarządzanie udziałami

---

### Tworzenie nowego udziału

1. Kliknij prawym przyciskiem myszy na kontener *Udziały* i wybierz <kbd class="os-ui">Nowy udział…</kbd>.
2. W kreatorze kliknij <kbd class="win-installer-btn">Dalej</kbd>.
3. Wskaż folder do udostępnienia:
    - Kliknij <kbd class="win-installer-btn">Przeglądaj…</kbd>, wybierz folder (np. `D:\Dane`) i kliknij <kbd class="win-installer-btn">OK</kbd>.
4. Nadaj nazwę udziału (np. `DaneWspolne`) i opcjonalnie dodaj opis.
5. Skonfiguruj uprawnienia:
    - **Wszyscy mają pełny dostęp**: Każdy użytkownik sieciowy będzie mógł odczytywać i zapisywać pliki.
    - **Administratorzy mają pełny dostęp, inni tylko odczyt**: Użytkownicy z grupy **_Administratorzy_** mają pełną kontrolę, pozostali tylko odczyt.
    - **Administratorzy mają pełny dostęp, inni brak dostępu**: Tylko **_Administratorzy_** mają dostęp.
    - **Dostosuj uprawnienia**: Ręczne ustawienie uprawnień dla konkretnych użytkowników lub grup.
6. Kliknij <kbd class="win-installer-btn">Zakończ</kbd>, aby utworzyć udział.

![Kreator nowego udziału](/Courses/Windows_11/Images/fsmgmt.msc_nowy_udzial.webp)

---

### Edycja udziału

1. Kliknij prawym przyciskiem myszy na istniejący udział w kontenerze *Udziały* i wybierz <kbd class="os-ui">Właściwości</kbd>.
2. W zakładkach możesz:
    - **Ogólne**: Zmienić nazwę udziału, opis lub ścieżkę lokalną.
    - **Uprawnienia udostępniania**: Dostosować, kto ma dostęp (np. dodać użytkownika **_Win_Klient_** z prawem do zapisu).
    - **Zabezpieczenia**: Ustawić szczegółowe uprawnienia **NTFS** dla folderu (np. ograniczyć modyfikację dla grupy **_Użytkownicy_**).
    - **Publikowanie**: W środowisku domenowym opublikować udział w **Active Directory**.
3. Kliknij <kbd class="win-menu-btn">OK</kbd>, aby zapisać zmiany.

---

### Usuwanie udziału

1. Kliknij prawym przyciskiem myszy na udział i wybierz <kbd class="os-ui">Przestań udostępniać</kbd>.
2. Potwierdź operację, klikając <kbd class="win-menu-btn">Tak</kbd>.

<div data-hint="info">

Usunięcie udziału nie usuwa folderu ani jego zawartości z dysku - jedynie wyłącza jego dostępność w sieci.

</div>

## Zarządzanie sesjami

Kontener **Sesje** pozwala monitorować i zarządzać aktywnymi połączeniami użytkowników z udostępnionymi zasobami.

- **Wyświetlanie sesji**: W prawym panelu zobaczysz listę użytkowników, ich adresy **IP**, czas połączenia i liczbę otwartych plików.
- **Zamykanie sesji**:
  1. Kliknij prawym przyciskiem myszy na sesję i wybierz <kbd class="os-ui">Zamknij sesję</kbd>.
  2. Potwierdź, klikając <kbd class="win-menu-btn">Tak</kbd>.

<div data-hint="danger">

**UWAGA!!!**
Zamykanie sesji może przerwać pracę użytkownika, np. zapis pliku.

</div>

---

## Zarządzanie otwartymi plikami

Kontener **Otwarte pliki** pokazuje, które pliki w udostępnionych folderach są aktualnie używane.

- **Szczegóły**: W prawym panelu zobaczysz ścieżkę pliku, nazwę użytkownika, tryb dostępu (odczyt/zapis) i czas otwarcia.
- **Zamykanie pliku**:
  1. Kliknij prawym przyciskiem myszy na plik i wybierz <kbd class="os-ui">Zamknij otwarty plik</kbd>.
  2. Potwierdź, klikając <kbd class="win-menu-btn">Tak</kbd>.

<div data-hint="warning">

**UWAGA!!!**
Zamykanie otwartych plików może spowodować utratę niezapisanych danych. 

</div>

### Uprawnienia udostępniania i NTFS

Udostępnianie folderów wymaga zrozumienia dwóch poziomów uprawnień:

  - **Uprawnienia udostępniania**: Określają, kto może uzyskać dostęp do folderu przez sieć i jakie ma prawa (odczyt, zapis, pełna kontrola). Ustawiane w kreatorze udziału lub we właściwościach.
  - **Uprawnienia NTFS**: Kontrolują dostęp do folderu na poziomie systemu plików, niezależnie od udostępniania. Ustawiane w zakładce **Zabezpieczenia** we właściwościach folderu w **Eksploratorze plików**.

**Przykład**: Jeśli folder ma uprawnienia udostępniania **Pełna kontrola** dla grupy ***Użytkownicy***, ale uprawnienia **`NTFS`** pozwalają tylko na odczyt, użytkownicy sieciowi będą ograniczeni do odczytu.

<div data-hint="success">

**Najlepsza praktyka**: Zawsze ustawiaj uprawnienia **`NTFS`** jako bardziej restrykcyjne lub równe uprawnieniom udostępniania, aby uniknąć niezamierzonego dostępu.

</div>

-----

### Domyślne udziały administracyjne

***Windows*** automatycznie tworzy ukryte udziały administracyjne, które są widoczne w `fsmgmt.msc`:

| Udział | Opis | Zastosowanie |
|---|---|---|
| **C$**, **D$**, itp. | Udziały dla każdego dysku (np. `C:\`). | Zdalny dostęp do całego dysku przez administratorów. |
| **ADMIN$** | Udział dla folderu `C:\Windows`. | Zdalne zarządzanie systemem, np. wdrażanie aktualizacji. |
| **IPC$** | Udział dla komunikacji międzyprocesowej. | Obsługa połączeń sieciowych, np. **SMB**. |



## Rozwiązywanie problemów

1. **Brak dostępu do udziału**:
    - Sprawdź uprawnienia udostępniania i **`NTFS`**.
    - Upewnij się, że usługa **Serwer** jest włączona (sprawdź w `services.msc`).
    - Włącz udostępnianie plików i drukarek w ustawieniach sieciowych.
2. **Udział niewidoczny w sieci**:
    - Włącz wykrywanie sieci w **Centrum sieci i udostępniania**.
    - Sprawdź, czy **Zapora Windows Defender** zezwala na ruch **SMB** (port $$445$$).


**Przykład**: Jeśli użytkownik **_Win_Klient_** nie może zapisać pliku w udziale `DaneWspolne`, sprawdź, czy ma uprawnienia zapisu w zakładce <kbd class="win-menu-btn">Uprawnienia udostępniania</kbd> i czy folder ma odpowiednie uprawnienia **`NTFS`**.

---

# Podcast AI

<audio src="https://raw.githubusercontent.com/Edu-Koala-V/audio_podcast/refs/heads/main/Windows_11/Audio/Windows Shared Folders Management with fsmgmt_msc.wav" controls>
Twoja przeglądarka nie wspiera odtwarzania plików audio.
</audio>