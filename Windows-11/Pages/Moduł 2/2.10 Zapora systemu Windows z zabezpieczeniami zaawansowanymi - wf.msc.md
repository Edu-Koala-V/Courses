# 2.10 Zapora systemu Windows z zabezpieczeniami zaawansowanymi - `wf.msc`

## Wprowadzenie

<img src="https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/wf-ico.webp" alt="Control panel Icon" style="display: inline-block; height: 1.2rem; vertical-align: middle;"> **Zapora Windows Defender z zabezpieczeniami zaawansowanymi** (`wf.msc`) to przystawka umożliwiająca precyzyjne zarządzanie ruchem sieciowym. Kontroluje połączenia przychodzące i wychodzące, chroniąc system przed nieautoryzowanym dostępem i atakami sieciowymi.

Działa w oparciu o usługę *Windows Defender Firewall* (`mpssvc`), filtrując pakiety danych według reguł zdefiniowanych dla **_aplikacji_**, **_portów_** lub **_protokołów_**.

---

## Uruchamianie Zapory systemu Windows

Przystawkę można uruchomić na kilka sposobów:

- **Wyszukiwarka**: Naciśnij <span style="white-space: nowrap;"><kbd class="Win"></kbd> + <kbd>S</kbd></span>, wpisz *"Zapora Windows Defender z zabezpieczeniami"* i kliknij aplikację.
- **Uruchom**: Naciśnij <span style="white-space: nowrap;"><kbd class="Win"></kbd> + <kbd>R</kbd></span>, wpisz `wf.msc` i naciśnij <kbd>Enter</kbd>.
- **Panel sterowania**: Otwórz *Panel sterowania* > *System i zabezpieczenia* > *Zapora systemu Windows Defender* > *Ustawienia zaawansowane* (po lewej).
- <img src="https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/file-explorer-icon.png" alt="Ikona Eksploratora plików" style="display: inline-block; height: 1.2rem; vertical-align: middle;"> **Eksplorator plików**: Przejdź do `C:\Windows\System32`, kliknij dwukrotnie `wf.msc`.

![Programik wf.msc uruchamiający Zaporę systemu Windows](https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/plik-wf.msc.webp)

---

## Interfejs Zapory systemu Windows

Okno `wf.msc` składa się z trzech głównych sekcji:

- **Drzewo nawigacji**: Lewy panel z hierarchią opcji:
    - *Reguły przychodzące* - kontrolują ruch wchodzący do komputera.
    - *Reguły wychodzące* - zarządzają ruchem wychodzącym.
    - *Reguły zabezpieczeń połączenia* - dotyczą szyfrowanych połączeń (np. **IPsec**).
    - *Monitorowanie* - pokazuje aktywne reguły i stan zapory.
- **Lista elementów**: Środkowy panel wyświetla szczegóły, np. listę reguł z nazwą, profilem, akcją (**Zezwalaj**/**Blokuj**) i powiązaną aplikacją.
- **Panel akcji**: Prawy panel oferuje opcje, takie jak *Nowa reguła…*, *Filtruj według…*, *Eksportuj zasady…* czy *Przywróć zasady domyślne*.

![Interfejs Zapory systemu Windows z zabezpieczeniami zaawansowanymi](https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/wf.msc.webp)

Teraz przeanalizujmy reguły na przykładzie mojego prywatnego *Firewall*-a. Rzeczy, na które warto zwrócić uwagę, to ikona przy regule. Może to być:

- <img src="https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/wf.msc-rule-allow.webp" alt="Zezwalaj" style="display: inline-block; height: 1.2rem; vertical-align: middle;">: Włączona zasada zezwalająca na ruch sieciowy.
- <img src="https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/wf.msc-rule-disable.webp" alt="Wyłącz" style="display: inline-block; height: 1.2rem; vertical-align: middle;"> (brak ikony - pustka): Wyłączona zasada, która w konfiguracji może zezwalać lub blokować. W zależności od profilu domyślna akcja dla **publicznego** blokuje ruch przychodzący, a dla **prywatnego** i **domenowego** zazwyczaj zezwala na ruch wychodzący.
- <img src="https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/wf.msc-rule-block.webp" alt="Nie zezwalaj" style="display: inline-block; height: 1.2rem; vertical-align: middle;">: Włączona zasada nie zezwalająca na ruch sieciowy.

Informacja o włączeniu lub wyłączeniu zasady i ustawieniu na blokowanie lub zezwalanie znajduje się w kolumnach **_Włączony_** i **_Akcja_**.

Kolejną informacją przydatną dla Ciebie jest to, do jakiego profilu została przydzielona dana zasada.

| **Profil** | **Opis** | **Domyślne ustawienia** |
|:---|:---|:---|
| **Domenowy** | Sieci firmowe z kontrolerem domeny. | Zezwala na większość ruchu firmowego. |
| **Prywatny** | Zaufane sieci, np. domowe. | Zezwala na ruch zaufanych aplikacji. |
| **Publiczny** | Niezaufane sieci, np. kawiarnie, lotniska. | Blokuje większość połączeń przychodzących. |

Ostatnie ważne informacje, na które warto zwrócić uwagę, to do jakiego portu odnosi się dana zasada. Oznaczyłem trzy przykładowe wartości, takie jak:

- **_Dowolne_**: Każdy port wykorzystywany przez dany program.
- **_$$443$$_**: Port wykorzystywany przez szyfrowaną wersję **HTTP**, czyli **HTTPS** (ang.: _Hypertext Transfer Protocol Secure_).
- **_$$3389$$_**: Port wykorzystywany przez **RDP** (ang.: _Remove Desktop Protocol_) do połączenia pulpitu zdalnego.

Na poniższym obrazku przedstawiłem swoją zaporę sieciową z zaznaczonymi informacjami, które przed chwilą omówiłem. Analizując poniższy zrzut ekranu, zauważyłem, że program **_Priest Simulator_** jest grą singlową i nie potrzebuje mieć zezwolenia na komunikację sieciową, więc powinienem usunąć tę zasadę lub ją zablokować. Jak widzisz, aktualny stan konfiguracji przepuszcza ruch sieciowy tej aplikacji, bo odruchowo przy pierwszym uruchomieniu pojawiło się okno, w którym zezwoliłem na dodanie nowej zasady do zapory. Chodź są to tylko reguły **TCP** i **UDP** przychodzące, nie mam żadnych reguł wychodzących skojarzonych z tą grą.

![Interfejs Zapory systemu Windows z zabezpieczeniami zaawansowanymi](https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/wf.msc-rule-info.webp)

Gdy usuniesz daną zasadę, to program powinien to wykryć i wyświetlić okno wyboru, tak jak na poniższym obrazku:

![Powiadomienie o braku reguły dla Priest Simulator](https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/wf.msc-priest-simulator-powiadomienie.webp)

Gdy pojawi się to okno, musisz zdecydować, czy zezwolić aplikacji na przesyłanie pakietów sieciowych — klikając <kbd class="os-ui">Zezwalaj</kbd>, lub je zablokować — klikając <kbd class="os-ui">Anuluj</kbd>.

![Powiadomienie z przyciskiem Anuluj](https://raw.githubusercontent.com/Edu-Koala-V/images/main/Windows_11/Images/wf.msc-priest-simulator-powiadomienie-anuluj.webp)

---

## Tworzenie i modyfikowanie reguł

Mógłbym Ci w tym momencie przedstawić, jak tworzyć i modyfikować reguły zapory sieciowej, ale nie miałoby to sensu. Zamiast tego, przy konfiguracji usług sieciowych, przedstawię Ci przy okazji, jak skonfigurować zasady potrzebne do przepuszczenia danego ruchu sieciowego. O ile bedzie to potrzebne.

---

# Podcast AI

<audio src="https://raw.githubusercontent.com/Edu-Koala-V/audio_podcast/refs/heads/main/Windows_11/Audio/Windows Defender Firewall_ Advanced Security (wf_msc) Guide.wav" controls>
Twoja przeglądarka nie wspiera odtwarzania plików audio.
</audio>